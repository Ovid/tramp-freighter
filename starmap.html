<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sol Sector Starmap</title>
    <script type="importmap">
    {
        "imports": {
            "three": "./js/vendor/three/build/three.module.js",
            "three/addons/": "./js/vendor/three/examples/jsm/"
        }
    }
    </script>
    <link rel="stylesheet" href="css/starmap.css">
</head>
<body>
    <div id="container"></div>
    
    <!-- Game HUD Overlay -->
    <div id="game-hud">
        <div class="hud-section hud-finances">
            <div class="hud-row">
                <span class="hud-label">Credits:</span>
                <span id="hud-credits" class="hud-value">0</span>
            </div>
            <div class="hud-row">
                <span class="hud-label">Debt:</span>
                <span id="hud-debt" class="hud-value">0</span>
            </div>
        </div>
        
        <div class="hud-section hud-time">
            <div class="hud-row">
                <span class="hud-label">Days:</span>
                <span id="hud-days" class="hud-value">0</span>
            </div>
        </div>
        
        <div class="hud-section hud-ship">
            <div class="hud-row">
                <span class="hud-label">Fuel:</span>
                <div class="fuel-bar-container">
                    <div id="fuel-bar" class="fuel-bar"></div>
                    <span id="hud-fuel-text" class="fuel-text">100%</span>
                </div>
            </div>
            <div class="hud-row">
                <span class="hud-label">Cargo:</span>
                <span id="hud-cargo" class="hud-value">0/50</span>
            </div>
        </div>
        
        <div class="hud-section hud-location">
            <div class="hud-row">
                <span class="hud-label">System:</span>
                <span id="hud-system" class="hud-value">Sol</span>
            </div>
            <div class="hud-row">
                <span class="hud-label">Distance from Sol:</span>
                <span id="hud-distance" class="hud-value">0.0 LY</span>
            </div>
        </div>
    </div>
    
    <!-- System Info Panel (existing) -->
    <div id="hud">
        <button class="close-btn" onclick="deselectStar()">×</button>
        <h2 id="hud-name">System Name</h2>
        <div class="info-row">
            <span class="label">Coordinates:</span>
            <span id="hud-coords">0, 0, 0</span>
        </div>
        <div class="info-row">
            <span class="label">Spectral Class:</span>
            <span id="hud-spectral">G2</span>
        </div>
        <div class="info-row">
            <span class="label">Wormholes:</span>
            <span id="hud-wormholes">0</span>
        </div>
        <div class="info-row">
            <span class="label">Status:</span>
            <span id="hud-reachable">Reachable</span>
        </div>
        <div id="jump-info" class="jump-info">
            <div class="info-row">
                <span class="label">Distance:</span>
                <span id="jump-distance">0.0 LY</span>
            </div>
            <div class="info-row">
                <span class="label">Fuel Cost:</span>
                <span id="jump-fuel-cost">0%</span>
            </div>
            <div class="info-row">
                <span class="label">Jump Time:</span>
                <span id="jump-time">0 days</span>
            </div>
            <!-- Jump Validation Message -->
            <div id="jump-validation-message" class="validation-message"></div>
        </div>
        <div id="connected-systems" class="connected-systems">
            <div class="connected-header">Connected Systems:</div>
            <div id="connected-list" class="connected-list">
                <!-- Populated dynamically -->
            </div>
        </div>
        <div class="hud-actions">
            <button class="action-btn" id="jump-btn">Jump to System</button>
            <button class="action-btn secondary" id="dock-btn">Dock at Station</button>
        </div>
    </div>
    
    <!-- Station Interface -->
    <div id="station-interface">
        <button class="close-btn" id="station-close-btn">×</button>
        <h2 id="station-name">Station Name</h2>
        <div class="station-info">
            <div class="info-row">
                <span class="label">System:</span>
                <span id="station-system-name">Sol</span>
            </div>
            <div class="info-row">
                <span class="label">Distance from Sol:</span>
                <span id="station-distance">0.0 LY</span>
            </div>
        </div>
        <div class="station-actions">
            <button class="station-btn" id="trade-btn">Trade</button>
            <button class="station-btn" id="refuel-btn">Refuel</button>
            <button class="station-btn" id="undock-btn">Undock</button>
        </div>
    </div>
    
    <!-- Trade Panel -->
    <div id="trade-panel">
        <button class="close-btn" id="trade-close-btn">×</button>
        <h2>Trade - <span id="trade-system-name">Sol</span></h2>
        
        <div class="trade-content">
            <!-- Market Goods Section -->
            <div class="trade-section">
                <h3>Market Goods</h3>
                <div id="market-goods" class="goods-list">
                    <!-- Dynamically populated with goods -->
                </div>
            </div>
            
            <!-- Cargo Section -->
            <div class="trade-section">
                <h3>Your Cargo</h3>
                <div class="cargo-capacity-display">
                    <span class="capacity-label">Capacity:</span>
                    <span id="trade-cargo-used">0</span> / <span id="trade-cargo-capacity">50</span>
                    <span class="capacity-remaining">(<span id="trade-cargo-remaining">50</span> remaining)</span>
                </div>
                <div id="cargo-stacks" class="cargo-list">
                    <!-- Dynamically populated with cargo stacks -->
                </div>
            </div>
        </div>
        
        <div class="trade-actions">
            <button class="station-btn" id="trade-back-btn">Back to Station</button>
        </div>
    </div>
    
    <!-- Refuel Panel -->
    <div id="refuel-panel">
        <button class="close-btn" id="refuel-close-btn">×</button>
        <h2>Refuel - <span id="refuel-system-name">Sol</span></h2>
        
        <div class="refuel-content">
            <!-- Current Status Section -->
            <div class="refuel-section">
                <h3>Current Status</h3>
                <div class="refuel-status">
                    <div class="info-row">
                        <span class="label">Current Fuel:</span>
                        <span id="refuel-current-fuel" class="value">100%</span>
                    </div>
                    <div class="info-row">
                        <span class="label">Fuel Price:</span>
                        <span id="refuel-price-per-percent" class="value">2 cr/%</span>
                    </div>
                </div>
            </div>
            
            <!-- Refuel Controls Section -->
            <div class="refuel-section">
                <h3>Refuel Amount</h3>
                <div class="refuel-controls">
                    <div class="refuel-input-group">
                        <label for="refuel-amount-input">Amount (%):</label>
                        <input type="number" id="refuel-amount-input" min="1" max="100" value="10" />
                    </div>
                    <div class="refuel-buttons">
                        <button class="refuel-preset-btn" data-amount="10">+10%</button>
                        <button class="refuel-preset-btn" data-amount="25">+25%</button>
                        <button class="refuel-preset-btn" data-amount="50">+50%</button>
                        <button class="refuel-preset-btn" id="refuel-max-btn">Max</button>
                    </div>
                </div>
            </div>
            
            <!-- Cost Display Section -->
            <div class="refuel-section">
                <div class="refuel-cost-display">
                    <div class="cost-row">
                        <span class="cost-label">Total Cost:</span>
                        <span id="refuel-total-cost" class="cost-value">20 cr</span>
                    </div>
                </div>
            </div>
            
            <!-- Validation Message -->
            <div id="refuel-validation-message" class="validation-message"></div>
        </div>
        
        <div class="refuel-actions">
            <button class="station-btn" id="refuel-confirm-btn">Confirm Refuel</button>
            <button class="station-btn secondary" id="refuel-back-btn">Back to Station</button>
        </div>
    </div>
    
    <!-- Error Notification Area -->
    <div id="notification-area"></div>
    
    <!-- Confirmation Modal -->
    <div id="modal-overlay" class="modal-overlay hidden">
        <div class="modal-dialog">
            <div class="modal-content">
                <p id="modal-message" class="modal-message"></p>
                <div class="modal-actions">
                    <button id="modal-cancel" class="modal-cancel">Cancel</button>
                    <button id="modal-confirm" class="modal-confirm">OK</button>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Event Notification Modal -->
    <div id="event-modal-overlay" class="modal-overlay hidden">
        <div class="modal-dialog">
            <div class="modal-content">
                <h3 id="event-modal-title" class="event-modal-title"></h3>
                <p id="event-modal-description" class="event-modal-description"></p>
                <p id="event-modal-duration" class="event-modal-duration"></p>
                <div class="modal-actions">
                    <button id="event-modal-dismiss" class="modal-confirm">Dismiss</button>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Initial Game Menu -->
    <div id="game-menu">
        <div class="menu-content">
            <h1 class="menu-title">Tramp Freighter Blues</h1>
            <div class="menu-subtitle">Sol Sector Trading Simulation</div>
            
            <div class="menu-buttons">
                <button class="menu-btn" id="continue-btn">Continue Game</button>
                <button class="menu-btn" id="new-game-btn">New Game</button>
            </div>
            
            <div class="menu-footer">
                <div class="menu-version">v1.0.0</div>
            </div>
        </div>
    </div>
    
    <!-- Control Buttons -->
    <div id="controls">
        <button class="control-btn" onclick="zoomIn()">Zoom In</button>
        <button class="control-btn" onclick="zoomOut()">Zoom Out</button>
        <button class="control-btn active" id="rotation-btn" onclick="toggleRotation()">Toggle Rotation</button>
        <button class="control-btn active" id="boundary-btn" onclick="toggleBoundary()">Toggle Boundary</button>
    </div>
    
    <!-- Application Code -->
    <script type="module" src="js/starmap.js"></script>
</body>
</html>
